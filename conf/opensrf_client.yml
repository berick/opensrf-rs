# vim:et:ts=2:sw=2:

message_bus:
  domain: private.localhost
  port: 6379
  username: opensrf@private
  password: password

logging:
  log4rs_config: conf/log4rs.yml

# ---- EXPERIMENTAL FORMAT -----

message-bus:

  # List all routable domains in our cluster.
  # We assume one OpenSRF Router is running on each of domain.
  #
  # If a Domain has a "hosted-services" entry, only services in the list
  # should register with the router at the domain.
  domains:
    - name: private.localhost
    - name: public.localhost
      hosted-services: public-services
    # port: 6379

  # Accounts used for logging in to the message bus.
  # Accounts must be consistent across all domains for x-domain routing.
  #
  # Account names are free-form and have no meaning outside of this 
  # configuration file.
  #
  # Account usernames are only used for logging in to Redis, where 
  # read/write permissions are enforced per account.  The usernames
  # have no meaning within the application.
  accounts:
    private-account:
      username: opensrf@private
      password: password
    public-account:
      username: opensrf@public
      password: password

  # Well-known connection types, with option to define custom types
  # for use with local scripts, etc.
  #
  # These link connection types to their bus accounts and define
  # their logging configs.
  connections:
    service:
      account: private-account
      loglevel: info
      syslog-facility: local0
      actlog-facility: local1
    gateway:
      account: public-account
      loglevel: info
      syslog-facility: local6
      actlog-facility: local1
    srfsh:
      account: private-account
      loglevel: debug
      syslog-facility: local0
    router:
      account: private-account
      loglevel: info
      syslog-facility: local2

# Named groups of services.
# Names are free-form and have no meaning outside of this configuration file.
service-groups:
  public-services:
    - opensrf.math
    - open-ils.actor
    - open-ils.acq
    - open-ils.auth
    - open-ils.auth_proxy
    - open-ils.booking
    - open-ils.cat
    - open-ils.circ
    - open-ils.collections
    - open-ils.courses
    - open-ils.curbside
    - open-ils.ebook_api
    - open-ils.fielder
    - open-ils.pcrud
    - open-ils.permacrud
    - open-ils.reporter
    - open-ils.resolver
    - open-ils.search
    - open-ils.serial
    - open-ils.supercat
    - open-ils.url_verify
    - open-ils.vandelay

# Avoid logging parameters for API calls (at or below INFO level) whose
# API name is a left-anchored match to any of the following method names.
log-protect:
  - open-ils.auth.authenticate.verify
  - open-ils.auth.authenticate.complete
  - open-ils.auth.login
  - open-ils.auth_proxy.login
  - open-ils.actor.patron.password_reset.commit
  - open-ils.actor.user.password
  - open-ils.actor.user.username
  - open-ils.actor.user.email
  - open-ils.actor.patron.update
  - open-ils.cstore.direct.actor.user.create
  - open-ils.cstore.direct.actor.user.update
  - open-ils.cstore.direct.actor.user.delete
  - open-ils.search.z3950.apply_credentials
  - open-ils.geo
  - open-ils.actor.geo
